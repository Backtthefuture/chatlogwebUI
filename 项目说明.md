# 聊天记录查询与AI分析系统 v1.0

## 📖 项目简介

一个基于Node.js的现代化聊天记录查询和AI智能分析系统，提供丰富的数据查询功能和专业的AI分析报告生成。

## ✨ 核心功能

### 🔍 聊天记录查询
- **多条件搜索**：支持时间范围、聊天对象、关键词等多维度搜索
- **分页浏览**：高效的分页加载，支持大量数据查询
- **实时预览**：支持图片、语音、文件等多媒体内容预览
- **数据导出**：一键导出查询结果为文本格式

### 🤖 AI智能分析
- **预设分析模板**：
  - 📱 编程群分析：技术栈讨论、代码质量、开发趋势
  - 🔬 科学群分析：学术讨论、知识分享、学习活跃度
  - 📚 读者群分析：阅读习惯、书籍推荐、读书心得
  - 🎨 自定义分析：完全自由的分析需求定制

- **智能设置系统**：
  - ⏰ 时间范围配置（昨天/今天/最近一周/最近一月/自定义）
  - 🎯 群聊选择（下拉框选择，显示群成员数）
  - 📝 自定义提示词（完全控制AI分析输出）
  - 💾 设置持久化存储

- **高质量分析报告**：
  - 📊 可视化图表生成
  - 📈 数据趋势分析
  - 💡 智能洞察提取
  - 🎨 美观的HTML报告界面

### 📋 数据管理
- **联系人管理**：快速加载和查看所有联系人信息
- **群聊管理**：群聊列表展示，包含群成员数统计
- **最近会话**：快速访问最近的对话记录
- **状态监控**：实时显示Chatlog服务连接状态

## 🛠 技术架构

### 后端技术栈
- **Node.js + Express**：高性能Web服务器
- **EJS模板引擎**：动态页面渲染
- **DeepSeek AI API**：智能分析核心
- **Chatlog API**：数据源接口
- **Moment.js**：时间处理

### 前端技术栈
- **原生JavaScript**：轻量级交互逻辑
- **CSS3 + 响应式设计**：现代化界面
- **Font Awesome图标**：丰富的图标库
- **本地存储**：设置持久化

### 数据可视化
- **Chart.js**：图表生成
- **ECharts**：高级可视化
- **Mermaid.js**：流程图和关系图

## 🚀 版本特性 (v1.0)

### 🎯 核心亮点
1. **完全自定义的AI分析**：用户可通过自定义提示词完全控制AI分析的输出内容和格式
2. **默认昨天时间范围**：确保总是有最新的聊天数据可供分析
3. **无数据限制**：移除了样本数量限制和消息内容截断，提供完整数据分析
4. **群聊智能选择**：AI设置中提供群聊下拉选择，显示群成员数
5. **设置持久化**：所有用户设置自动保存，下次使用时恢复

### 🔧 技术优化
- **DeepSeek Chat模型**：使用更稳定的`deepseek-chat`模型
- **超时时间优化**：120秒超时确保复杂分析完成
- **完整数据传输**：保留所有聊天消息的完整内容
- **错误处理完善**：友好的错误提示和状态显示

### 🎨 界面优化
- **AI分析置顶**：将AI分析功能作为主要功能置于侧边栏顶部
- **设置按钮集成**：每个分析类型都有独立的设置按钮
- **暖色系设计**：采用温暖的配色方案提升用户体验
- **响应式布局**：完美适配桌面和移动设备

## 📁 项目结构

```
chatlog/
├── server.js              # 主服务器文件
├── package.json           # 项目依赖配置
├── views/
│   └── index.ejs          # 主页面模板
├── public/
│   ├── css/
│   │   └── style.css      # 样式文件
│   └── js/
│       ├── app.js         # 主应用逻辑
│       ├── ai-settings.js # AI设置管理
│       └── preset-prompts.js # 预设提示词
├── start.sh               # Linux/Mac 启动脚本
├── start.bat             # Windows 启动脚本
├── 快速开始.md            # 快速开始指南
└── 项目说明.md            # 项目说明文档
```

## 🔌 API 接口

### 聊天数据接口
- `GET /api/chatlog` - 获取聊天记录
- `GET /api/contacts` - 获取联系人列表
- `GET /api/chatrooms` - 获取群聊列表
- `GET /api/sessions` - 获取会话列表
- `GET /api/media` - 获取多媒体内容

### AI分析接口
- `POST /api/ai-analysis` - 执行AI分析
- `GET /api/test-deepseek` - 测试DeepSeek API连接
- `GET /api/status` - 检查服务状态

## 📊 数据流程

1. **数据源**：Chatlog HTTP服务（端口5030）
2. **数据处理**：Node.js服务器中间层处理和格式化
3. **AI分析**：DeepSeek API进行智能分析
4. **结果展示**：生成HTML可视化报告

## 🌟 使用场景

### 👥 团队协作
- 分析团队讨论效率和参与度
- 识别关键话题和决策节点
- 生成会议总结和行动项

### 📈 社群运营
- 了解社群活跃度和用户行为
- 分析热门话题和用户兴趣
- 优化社群内容和互动策略

### 🎓 学习研究
- 分析学习群的知识分享模式
- 统计学习资源和讨论热点
- 生成学习效果评估报告

### 💼 商业洞察
- 客户需求和反馈分析
- 产品讨论和用户体验总结
- 市场趋势和竞品分析

## 🔒 隐私安全

- **本地部署**：所有数据处理在本地进行，保护隐私
- **API密钥保护**：支持环境变量配置，安全存储API密钥
- **数据不存储**：分析过程不存储原始聊天数据
- **开源透明**：代码完全开源，可审查和定制

## 📝 更新日志

### v1.0 (2025-06-16)
- ✅ 完整的聊天记录查询系统
- ✅ AI智能分析功能（4种分析类型）
- ✅ 高级设置管理（时间/群聊/提示词）
- ✅ 可视化数据报告生成
- ✅ 响应式界面设计
- ✅ 设置持久化存储
- ✅ DeepSeek AI集成
- ✅ 多媒体内容支持
- ✅ 数据导出功能

## 🎯 发展规划

### 下一版本计划
- 📊 更多数据可视化图表类型
- 🤖 更多AI分析模板
- 💾 数据缓存优化
- 🔍 高级搜索功能
- 📱 移动端应用
- 🌐 多语言支持

---

> 💡 **提示**：本项目专注于提供专业的聊天数据分析能力，适合团队协作、社群运营、学习研究等多种场景使用。 